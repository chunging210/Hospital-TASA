<div class="modal fade room-detail-modal" id="roomDetailModal" tabindex="-1" aria-labelledby="roomDetailModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-header">
                <h5 class="modal-title" id="roomDetailModalLabel">
                    <i class="mdi mdi-home-city"></i> 會議室詳細資訊 - <span>{{ detailRoom?.Name || '未知' }}</span>
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">
                <div class="row">
                    <!-- 左側：圖片輪播 -->
                    <div class="col-lg-6 detail-image-column">
                        <div class="detail-image-wrapper">
                            <div class="room-image-carousel">
                                <!-- 圖片區域 -->
                                <div class="detail-image-container">
                                    <!-- 有圖片的情況 -->
                                    <img v-if="hasDetailImages && currentDetailImage && !isDetailVideoFile(currentDetailImage)"
                                        :key="detailRoomCarouselIndex" :src="currentDetailImage"
                                        class="d-block w-100 h-100"
                                        :class="room.carouselDirection === 'next' ? 'carousel-next' : 'carousel-prev'"
                                        alt="會議室圖片">

                                    <!-- 有影片的情況 -->
                                    <video
                                        v-else-if="hasDetailImages && currentDetailImage && isDetailVideoFile(currentDetailImage)"
                                        :key="detailRoomCarouselIndex" controls
                                        style="width: 100%; height: 100%; object-fit: contain; background: #000;"
                                        :class="room.carouselDirection === 'next' ? 'carousel-next' : 'carousel-prev'"
                                        @@play="room.stopCarousel()" @@pause="room.startCarousel()"
                                        @@ended="room.nextDetailImage()">
                                        <source :src="currentDetailImage" type="video/mp4">
                                        你的瀏覽器不支援視訊播放
                                    </video>

                                    <!-- 無圖片/影片的情況 -->
                                    <div v-else class="detail-image-placeholder">
                                        <span class="text-muted">暫無圖片</span>
                                    </div>

                                    <!-- 左右箭頭 -->
                                    <button v-if="hasDetailImages" class="carousel-btn prev"
                                        @@click="room.prevDetailImage()">
                                        &lt;
                                    </button>
                                    <button v-if="hasDetailImages" class="carousel-btn next"
                                        @@click="room.nextDetailImage()">
                                        &gt;
                                    </button>

                                    <!-- 圖片指示器 -->
                                    <div v-if="hasDetailImages" class="image-indicators">
                                        <span v-for="(_, index) in detailRoom.Images" :key="index"
                                            class="image-indicator"
                                            :class="{ active: index === detailRoomCarouselIndex }"
                                            @@click="room.stopCarousel(); detailRoomCarouselIndex = index; room.startCarousel()">
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 右側：詳細資訊 Tab -->
                    <div class="col-lg-6">
                        <!-- Tab 導覽 -->
                        <ul class="nav nav-tabs" id="roomDetailTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="info-tab" data-bs-toggle="tab"
                                    data-bs-target="#info" type="button" role="tab" aria-controls="info"
                                    aria-selected="true">
                                    <i class="mdi mdi-cog"></i> 基本資訊
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="equipment-tab" data-bs-toggle="tab"
                                    data-bs-target="#equipment" type="button" role="tab" aria-controls="equipment"
                                    aria-selected="false">
                                    <i class="mdi mdi-tools"></i> 設備狀態
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="schedule-tab" data-bs-toggle="tab"
                                    data-bs-target="#schedule" type="button" role="tab" aria-controls="schedule"
                                    aria-selected="false">
                                    <i class="mdi mdi-calendar-clock"></i> 今日時程
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="pricing-tab" data-bs-toggle="tab" data-bs-target="#pricing"
                                    type="button" role="tab" aria-controls="pricing" aria-selected="false">
                                    <i class="mdi mdi-currency-twd"></i> 收費標準
                                </button>
                            </li>
                        </ul>

                        <!-- Tab 內容 -->
                        <div class="tab-content" id="roomDetailTabContent">
                            <!-- 基本資訊 -->
                            <div class="tab-pane fade show active" id="info" role="tabpanel" aria-labelledby="info-tab">
                                <div class="info-item room-feature-section description-wrapper">
                                    <div class="room-feature-content">
                                        <div class="info-label">會議室說明</div>
                                        <div class="description-content">
                                            {{ detailRoom?.Description || '無' }}
                                        </div>
                                    </div>
                                </div>

                                <div class="info-grid">
                                    <div class="info-item">
                                        <div class="info-icon">
                                            <i class="mdi mdi-account-group"></i>
                                        </div>
                                        <div class="info-label">人數 </div>
                                        <div class="info-value">{{ detailRoom?.Capacity || '-' }}人</div>
                                    </div>
                                    <div class="info-item">
                                        <div class="info-icon">
                                            <i class="mdi mdi-floor-plan"></i>
                                        </div>
                                        <div class="info-label">面積</div>
                                        <div class="info-value">{{ detailRoom?.Area || '-' }}㎡</div>
                                    </div>
                                    <div class="info-item">
                                        <div class="info-icon">
                                            <i class="mdi mdi-map-marker"></i>
                                        </div>
                                        <div class="info-label">位置</div>
                                        <div class="info-value">{{ (detailRoom?.Building || '') }} {{ (detailRoom?.Floor
                                            || '') }}樓</div>
                                    </div>
                                    <!-- ✅ 加上分院 -->
                                    <div class="info-item">
                                        <div class="info-icon">
                                            <i class="mdi mdi-hospital-box"></i>
                                        </div>
                                        <div class="info-label">分院</div>
                                        <div class="info-value">{{ detailRoom?.Department?.Name || '-' }}</div>
                                    </div>
                                </div>
                            </div>

                            <!-- 設備頁 -->
                            <div class="tab-pane fade" id="equipment" role="tabpanel" aria-labelledby="equipment-tab">
                                <div class="equipment-status">
                                    <h6 class="mb-3">
                                        <i class="mdi mdi-tools text-warning"></i> 設備狀態
                                    </h6>
                                    <div v-if="detailRoom?.Equipment?.length > 0">
                                        <div v-for="equipment in detailRoom.Equipment" :key="equipment.Id"
                                            class="equipment-item d-flex align-items-center mb-2">
                                            <i class="mdi mdi-tools me-2 text-secondary"></i>
                                            <span>{{ equipment.Name }}</span>
                                        </div>
                                    </div>

                                    <div v-else class="text-muted">
                                        暫無設備資訊
                                    </div>
                                </div>
                            </div>
                            <!-- 時程頁 -->
                            <div class="tab-pane fade" id="schedule" role="tabpanel" aria-labelledby="schedule-tab">
                                <div class="schedule-section">
                                    <h6 class="mb-3">
                                        <i class="mdi mdi-calendar-clock text-info"></i> 今日使用時程
                                    </h6>
                                    <div class="table-responsive">
                                        <table class="table table-sm table-bordered">
                                            <thead class="table-light">
                                                <tr>
                                                    <th>時間</th>
                                                    <th>會議名稱</th>
                                                    <th>狀態</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- ✅ 有資料 -->
                                                <tr v-if="todaySchedule && todaySchedule.length > 0"
                                                    v-for="(schedule, index) in todaySchedule" :key="index">
                                                    <td>{{ schedule.StartTime }} - {{ schedule.EndTime }}</td>
                                                    <td>{{ schedule.ConferenceName }}</td>
                                                    <td>
                                                        <span class="badge"
                                                            :class="getStatusBadgeClass(schedule.Status)">
                                                            {{ getStatusText(schedule.Status) }}
                                                        </span>
                                                    </td>
                                                </tr>
                                                <!-- ✅ 無資料 -->
                                                <tr v-else>
                                                    <td colspan="3" class="text-center text-muted">今日無會議</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- 收費頁 -->
                            <div class="tab-pane fade" id="pricing" role="tabpanel" aria-labelledby="pricing-tab">
                                <div class="pricing-section">
                                    <div class="mb-3">
                                        @* <span class="badge bg-primary">{{ detailRoom?.PricingType === 0 ? '小時制' : '時段制'
                                            }}</span> *@
                                        <span class="badge bg-primary">時段制</span>
                                    </div>

                                    <div v-if="detailRoom?.PricingDetails && detailRoom.PricingDetails.length > 0"
                                        class="pricing-list">

                                        <!-- 時段制 - 時段名稱和時間同一行 -->
                                        <div v-if="detailRoom.PricingType === 1"
                                            v-for="pricing in detailRoom.PricingDetails" :key="pricing.Name">
                                            <div class="pricing-item-period">
                                                <div class="pricing-item-period-info">
                                                    <span class="pricing-name">{{ pricing.Name }}</span>
                                                    <span class="pricing-time">{{ pricing.StartTime }} - {{
                                                        pricing.EndTime }}</span>
                                                </div>
                                                <div class="pricing-item-period-divider"></div>
                                                <span class="pricing-item-period-price">NT$ {{ pricing.Price }}</span>
                                            </div>
                                        </div>

                                        <!-- 小時制 - 只顯示時間 -->
                                        @* <div v-else-if="detailRoom.PricingType === 0"
                                            v-for="pricing in detailRoom.PricingDetails" :key="pricing.Name">
                                            <div class="pricing-item-hourly">
                                                <span class="pricing-item-hourly-time">{{ pricing.StartTime }} - {{
                                                    pricing.EndTime }}</span>
                                                <span class="pricing-item-hourly-price">NT$ {{ pricing.Price }}</span>
                                            </div>
                                        </div> *@
                                    </div>

                                    <div v-else class="text-muted">
                                        暫無收費資訊
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>