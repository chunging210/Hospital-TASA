<!-- ÊúÉË≠∞ÂÆ§Ë©≥ÊÉÖÊ®°ÊÖãË¶ñÁ™ó -->
<div class="modal fade" id="roomDetailModal" tabindex="-1" aria-labelledby="roomDetailModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">

            @* <div style="background: #fff3cd; padding: 15px; margin: 10px;">
                <strong>üîç Ë©≥Á¥∞Ë™øË©¶Ôºö</strong>
                <div><code>detailRoom: {{ detailRoom }}</code></div>
                <div><code>detailRoomCarouselIndex: {{ detailRoomCarouselIndex }}</code></div>
            </div> *@

            <div class="modal-header">
                <h5 class="modal-title" id="roomDetailModalLabel">
                    <i class="mdi mdi-home-city"></i> ÊúÉË≠∞ÂÆ§Ë©≥Á¥∞Ë≥áË®ä - <span>{{ detailRoom?.Name || 'Êú™Áü•' }}</span>
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <!-- Â∑¶ÂÅ¥ÔºöÂúñÁâáËº™Êí≠ -->
                    <div class="col-lg-6" style="display: flex; align-items: center;">
                        <div class="room-image-carousel" style="width: 100%;">
                            <!-- ÂúñÁâáÂçÄÂüü -->
                            <div
                                style="position: relative; height: 400px; background: #f0f0f0; border-radius: 8px; overflow: hidden;">
                                <!-- ÊúâÂúñÁâáÁöÑÊÉÖÊ≥Å -->
                                <img v-if="hasDetailImages && currentDetailImage" :src="currentDetailImage"
                                    class="d-block w-100 h-100" alt="ÊúÉË≠∞ÂÆ§ÂúñÁâá" style="object-fit: cover;">

                                <!-- ÁÑ°ÂúñÁâáÁöÑÊÉÖÊ≥Å -->
                                <div v-else class="d-flex align-items-center justify-content-center h-100">
                                    <span class="text-muted">Êö´ÁÑ°ÂúñÁâá</span>
                                </div>

                                <!-- Â∑¶Âè≥ÁÆ≠È†≠ -->
                                <button v-if="hasDetailImages" class="carousel-btn prev"
                                    @@click="room.prevDetailImage()">
                                    &lt;
                                </button>
                                <button v-if="hasDetailImages" class="carousel-btn next"
                                    @@click="room.nextDetailImage()">
                                    &gt;
                                </button>

                                <!-- ÂúñÁâáÊåáÁ§∫Âô® -->
                                <div v-if="hasDetailImages"
                                    style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); display: flex; gap: 5px;">
                                    <span v-for="(_, index) in detailRoom.Images" :key="index" :style="{ 
                                            width: '8px', 
                                            height: '8px', 
                                            borderRadius: '50%',
                                            backgroundColor: index === detailRoomCarouselIndex ? '#007bff' : '#ccc',
                                            cursor: 'pointer'
                                        }" @@click="detailRoomCarouselIndex = index">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Âè≥ÂÅ¥ÔºöË©≥Á¥∞Ë≥áË®ä Tab -->
                    <div class="col-lg-6">
                        <!-- Tab Â∞éË¶Ω -->
                        <ul class="nav nav-tabs" id="roomDetailTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="info-tab" data-bs-toggle="tab"
                                    data-bs-target="#info" type="button" role="tab" aria-controls="info"
                                    aria-selected="true">
                                    <i class="mdi mdi-cog"></i> Âü∫Êú¨Ë≥áË®ä
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="equipment-tab" data-bs-toggle="tab"
                                    data-bs-target="#equipment" type="button" role="tab" aria-controls="equipment"
                                    aria-selected="false">
                                    <i class="mdi mdi-tools"></i> Ë®≠ÂÇôÁãÄÊÖã
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="schedule-tab" data-bs-toggle="tab"
                                    data-bs-target="#schedule" type="button" role="tab" aria-controls="schedule"
                                    aria-selected="false">
                                    <i class="mdi mdi-calendar-clock"></i> ‰ªäÊó•ÊôÇÁ®ã
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="pricing-tab" data-bs-toggle="tab" data-bs-target="#pricing"
                                    type="button" role="tab" aria-controls="pricing" aria-selected="false">
                                    <i class="mdi mdi-currency-twd"></i> Êî∂Ë≤ªÊ®ôÊ∫ñ
                                </button>
                            </li>
                        </ul>

                        <!-- Tab ÂÖßÂÆπ -->
                        <div class="tab-content" id="roomDetailTabContent">
                            <!-- Âü∫Êú¨Ë≥áË®ä -->
                            <div class="tab-pane fade show active" id="info" role="tabpanel" aria-labelledby="info-tab">
                                <div class="info-item room-feature-section">
                                    <div class="room-feature-content">
                                        <div class="info-label">ÊúÉË≠∞ÂÆ§Ë™™Êòé</div>
                                        <div class="info-value"
                                            style="max-height: 200px; overflow-y: auto; word-break: break-word; white-space: normal; overflow-wrap: break-word; border-top: 1px solid #e0e0e0; padding: 10px;">
                                            {{ detailRoom?.Description || 'ÁÑ°' }}
                                        </div>
                                    </div>
                                </div>

                                <div class="info-grid">
                                    <div class="info-item">
                                        <div class="info-icon">
                                            <i class="mdi mdi-account-group"></i>
                                        </div>
                                        <div class="info-label">ÂÆπÈáè</div>
                                        <div class="info-value">{{ detailRoom?.Capacity || '-' }}‰∫∫</div>
                                    </div>
                                    <div class="info-item">
                                        <div class="info-icon">
                                            <i class="mdi mdi-floor-plan"></i>
                                        </div>
                                        <div class="info-label">Èù¢Á©ç</div>
                                        <div class="info-value">{{ detailRoom?.Area || '-' }}„é°</div>
                                    </div>
                                    <div class="info-item">
                                        <div class="info-icon">
                                            <i class="mdi mdi-door"></i>
                                        </div>
                                        <div class="info-label">ÊàøÈñìÁ∑®Ëôü</div>
                                        <div class="info-value">{{ detailRoom?.Number || '-' }}</div>
                                    </div>
                                    <div class="info-item">
                                        <div class="info-icon">
                                            <i class="mdi mdi-map-marker"></i>
                                        </div>
                                        <div class="info-label">‰ΩçÁΩÆ</div>
                                        <div class="info-value">{{ (detailRoom?.Building || '') }} {{ (detailRoom?.Floor
                                            || '') }}Ê®ì</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Ë®≠ÂÇôÈ†Å -->
                            <div class="tab-pane fade" id="equipment" role="tabpanel" aria-labelledby="equipment-tab">
                                <div class="equipment-status">
                                    <h6 class="mb-3">
                                        <i class="mdi mdi-tools text-warning"></i> Ë®≠ÂÇôÁãÄÊÖã
                                    </h6>
                                    <div class="equipment-list">
                                        <!-- Â¶ÇÊûúÊúâË®≠ÂÇôË≥áÊñôÂ∞±È°ØÁ§∫ÔºåÊ≤íÊúâÂ∞±È°ØÁ§∫ÊèêÁ§∫ -->
                                        <div v-if="detailRoom?.Equipment && detailRoom.Equipment.length > 0">
                                            <div v-for="equipment in detailRoom.Equipment" :key="equipment.id"
                                                class="equipment-item d-flex justify-content-between align-items-center mb-2">
                                                <span>{{ equipment.name }}</span>
                                                <span
                                                    :class="['badge', equipment.status === 'working' ? 'bg-success' : 'bg-danger']">
                                                    {{ equipment.status === 'working' ? 'Ê≠£Â∏∏' : 'Áï∞Â∏∏' }}
                                                </span>
                                            </div>
                                        </div>
                                        <div v-else class="text-muted">
                                            Êö´ÁÑ°Ë®≠ÂÇôË≥áË®ä
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ÊôÇÁ®ãÈ†Å -->
                            <div class="tab-pane fade" id="schedule" role="tabpanel" aria-labelledby="schedule-tab">
                                <div class="schedule-section">
                                    <h6 class="mb-3">
                                        <i class="mdi mdi-calendar-clock text-info"></i> ‰ªäÊó•‰ΩøÁî®ÊôÇÁ®ã
                                    </h6>
                                    <div class="table-responsive">
                                        <table class="table table-sm table-bordered">
                                            <thead class="table-light">
                                                <tr>
                                                    <th>ÊôÇÈñì</th>
                                                    <th>ÊúÉË≠∞ÂêçÁ®±</th>
                                                    <th>‰∏ªËæ¶ÂñÆ‰Ωç</th>
                                                    <th>ÁãÄÊÖã</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr v-if="detailRoom?.Schedule && detailRoom.Schedule.length > 0"
                                                    v-for="schedule in detailRoom.Schedule" :key="schedule.id">
                                                    <td>{{ schedule.time }}</td>
                                                    <td>{{ schedule.name }}</td>
                                                    <td>{{ schedule.organizer }}</td>
                                                    <td><span class="badge bg-info">{{ schedule.status }}</span></td>
                                                </tr>
                                                <tr v-else>
                                                    <td colspan="4" class="text-center text-muted">‰ªäÊó•ÁÑ°ÂÆâÊéí</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Êî∂Ë≤ªÈ†Å -->
                            <div class="tab-pane fade" id="pricing" role="tabpanel" aria-labelledby="pricing-tab">
                                <div class="pricing-section">
                                    <div class="mb-3">
                                        <span class="badge bg-primary">{{ detailRoom?.PricingType === 'hourly' ? 'Â∞èÊôÇÂà∂' :
                                            'ÊôÇÊÆµÂà∂' }}</span>
                                    </div>

                                    <div v-if="detailRoom?.PricingDetails && detailRoom.PricingDetails.length > 0"
                                        class="pricing-list">
                                        <div v-for="pricing in detailRoom.PricingDetails" :key="pricing.Name"
                                            class="pricing-item">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <span>{{ pricing.Name }}</span>
                                                <strong class="text-primary">NT$ {{ pricing.Price }}</strong>
                                            </div>
                                            <small class="text-muted">{{ pricing.StartTime }} - {{ pricing.EndTime
                                                }}</small>
                                        </div>
                                    </div>
                                    <div v-else class="text-muted">
                                        Êö´ÁÑ°Êî∂Ë≤ªË≥áË®ä
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>